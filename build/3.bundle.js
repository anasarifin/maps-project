(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{15:function(t,n,e){"use strict";n.a=e.p+"src/images/marker.png"},16:function(t,n,e){"use strict";n.a=e.p+"src/images/pin_red.png"},17:function(t,n,e){"use strict";n.a=e.p+"src/images/pin_yellow.png"},18:function(t,n,e){"use strict";n.a=e.p+"src/images/pin_green.png"},19:function(t,n,e){"use strict";n.a=e.p+"src/images/pin_black.png"},20:function(t,n,e){"use strict";n.a=e.p+"src/images/my_location.png"},50:function(t,n,e){var o=e(4),a=e(51);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r={insert:"head",singleton:!1};o(a,r);t.exports=a.locals||{}},51:function(t,n,e){(n=e(5)(!1)).push([t.i,'body {\n\toverscroll-behavior: contain;\n\toverflow: hidden;\n}\nimg:press {\n\toutline: none;\n}\n.map-page {\n\twidth: 100vw;\n}\n.map-container {\n\twidth: 100%;\n\theight: 100%;\n}\n.map-top {\n\tposition: fixed;\n\tdisplay: grid;\n\tgrid-template-columns: auto 50px;\n\ttop: 10px;\n\twidth: 95%;\n\tmax-width: 600px;\n\theight: 50px;\n\tbackground-color: white;\n\tborder-radius: 5px;\n\tleft: 50%;\n\ttransform: translate(-50%);\n\tbox-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.4);\n}\n.map-top-search {\n\toutline: none;\n\tpadding-left: 17px;\n\tborder: none;\n\tborder-radius: 5px;\n}\n.map-top-findme {\n\tjustify-self: center;\n\talign-self: center;\n}\n.map-radius-icon {\n\tposition: absolute;\n\tright: 10px;\n\ttop: 80px;\n\twidth: 40px;\n\theight: 40px;\n\tbackground-color: salmon;\n\tz-index: 2;\n\tborder-radius: 5px;\n\tbox-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.4);\n}\n.map-radius-con {\n\tposition: absolute;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n\tjustify-items: center;\n\tvertical-align: center;\n\ttop: 80px;\n\twidth: 95%;\n\tmax-width: 600px;\n\theight: 100px;\n\tfont-size: larger;\n\tfont-weight: bold;\n\tbackground-color: white;\n\tbox-sizing: border-box;\n\tpadding: 20px;\n\tborder-radius: 5px;\n\tleft: 50%;\n\ttransform: translate(-50%);\n\tbox-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.4);\n\tz-index: 4;\n}\n.map-radius-con input {\n\twidth: 80%;\n}\n.map-radius-bg {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tz-index: 3;\n}\n.map-bottom {\n\tposition: fixed;\n\tbottom: 20px;\n\twidth: 100%;\n\theight: 200px;\n\tbackground-color: white;\n\tborder-radius: 15px 15px 0 0;\n\ttransform: translate3d(0, 100%, 0);\n\tpadding: 30px;\n\tbox-sizing: border-box;\n\tbox-shadow: 0 0 4px 4px rgba(0, 0, 0, 0.3);\n}\n.map-bottom-body {\n\twidth: 100%;\n\tmargin-bottom: 15px;\n\tbackground-color: #0288d1;\n\tborder-radius: 3px;\n\tpadding: 10px;\n\tbox-sizing: border-box;\n\tfont-size: larger;\n\tcolor: white;\n}\n.map-bottom-nopick {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\ttext-align: center;\n\tbackground-color: white;\n\tcolor: black;\n\tfont-size: xx-large;\n}\n.map-bottom-odp {\n\ttext-align: center;\n}\n\n.gm-style-cc {\n\tdisplay: none !important;\n}\n.gm-style a[href^="https://maps.google.com/maps"]\n{\n\tdisplay: none !important;\n}\n',""]),t.exports=n},53:function(t,n,e){"use strict";e.r(n);var o=e(0),a=e.n(o),r=e(21),i=e.n(r),s=e(30),c=e.n(s),l=(e(50),e(15)),p=e(16),u=e(17),d=e(18),m=e(19),g=e(20);function f(t,n,e,o,a,r,i){try{var s=t[r](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(o,a)}function b(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var r=t.apply(n,e);function i(t){f(r,o,a,i,s,"next",t)}function s(t){f(r,o,a,i,s,"throw",t)}i(void 0)}))}}function w(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],o=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done)&&(e.push(i.value),!n||e.length!==n);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return h(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return h(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}var v=c()(i.a),x=c()(i.a),y={lat:-6.2088,lng:106.8456};function k(t){return t.toLowerCase().split(" ").map((function(t){return t.replace(t[0],t[0].toUpperCase())})).join(" ")}n.default=function(){var t,n,e,r,s,c,f,h=Object(o.useRef)(),E=Object(o.useRef)(),O=Object(o.useRef)(),C=Object(o.useRef)(),j=w(Object(o.useState)(""),2),S=j[0],F=j[1],M=w(Object(o.useState)("No location selected."),2),P=M[0],N=M[1],D=w(Object(o.useState)(!0),2),L=D[0],z=D[1],T=w(Object(o.useState)(""),2),_=T[0],R=T[1],A=w(Object(o.useState)(0),2),I=A[0],W=A[1],K=w(Object(o.useState)("200"),2),H=K[0],Z=K[1],V=w(Object(o.useState)(!1),2),G=V[0],J=V[1],U=w(Object(o.useState)(!1),2),Y=U[0],B=U[1],q=[];Object(o.useEffect)((function(){var o=document.createElement("script");o.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyCXU3EeZo0yexMDnmkigGJJvTvcVDpgPl0","&libraries=places,geometry"),window.document.body.appendChild(o),o.addEventListener("load",b(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=new window.google.maps.Map(h.current,{zoom:15,center:y,clickableIcons:!1,disableDefaultUI:!0,gestureHandling:"greedy",mapTypeControlOptions:{position:window.google.maps.ControlPosition.BOTTOM_CENTER}}),n=new window.google.maps.Marker({map:t,visible:!1,icon:{url:l.a,size:new window.google.maps.Size(42,50),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(21,47)}}),(s=new window.google.maps.places.Autocomplete(E.current,{fields:["geometry","name"],types:["geocode"],componentRestrictions:{country:["id"]}})).bindTo("bounds",t),e=new window.google.maps.Circle({map:t,strokeColor:"#FF0000",strokeOpacity:0,strokeWeight:0,fillColor:"#FF0000",fillOpacity:.2,clickable:!1}),r=new window.google.maps.Polygon({map:t,paths:[],strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillOpacity:0,clickable:!1}),c=new window.google.maps.DirectionsService,f=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,preserveViewport:!0}),$();case 9:case"end":return o.stop()}}),o)}))))}),[]);var Q=function(n,o,a){q.map((function(t){return t.setMap(null)})),f&&f.setMap(null),t.panTo({lat:n,lng:o}),e.setMap(null),e.setMap(t),e.setCenter({lat:n,lng:o}),e.setRadius(parseFloat(C.current.value)),z(!0),N("Fetching data..."),v({url:"https://siis-api.udata.id/point_kelurahan/".concat(o,",").concat(n)}).then((function(e){var a=e.data.data[0],i=a.provinsi,s=a.kabupaten,c=a.kecamatan,l=a.kelurahan,p=a.shape.slice(11,-2).split(", ").map((function(t){var n=t.split(" ");return{lat:parseFloat(n[1]),lng:parseFloat(n[0])}}));r.setPath(p),r.setMap(t);var u="KOTA"===s.split(" ")[0]?s.replace("KOTA ",""):s,d="Kel. ".concat(k(l),", Kec. ").concat(k(c),", ").concat(u?"Kota":"Kab."," ").concat(k(u),", ").concat(k(i).replace("Dki","DKI"));z(!1),F(d),R("Fetching ODP data..."),O.current.style.transition=".3s",O.current.style.bottom="200px",B(!0),X(n,o)})).catch((function(t){i.a.isCancel(t)||(console.log(t),N("Fetching failed!"))}))},X=function(n,e){x({url:"http://digitasi-consumer-siis-dev.vsan-apps.playcourt.id/api/siis/v1/get-odp",method:"post",data:{lat:n,long:e,radius:C.current.value},auth:{username:"telkom",password:"da1c25d8-37c8-41b1-afe2-42dd4825bfea"}}).then((function(o){var a=o.data.data.features.filter((function(t){return t.attributes.portidlenumber>0}));R("".concat(a.length," ODP found")),q=[],t.setCenter({lat:n,lng:e}),a.length&&(parseFloat(C.current.value)<=150?t.setZoom(18):parseFloat(C.current.value)>=250?t.setZoom(16):t.setZoom(17)),"true"===O.current.dataset.show&&t.panBy(0,70),a.forEach((function(o,a){var r,i=o.attributes;switch(i.status_occ_add){case"RED":r=p.a;break;case"YELLOW":r=u.a;break;case"GREEN":r=d.a;break;default:r=m.a}q.push(new window.google.maps.Marker({map:t,position:{lat:i.lat,lng:i.long},icon:{url:r,size:new window.google.maps.Size(38,45),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(19,42)}})),q[a].infoWindow=new window.google.maps.InfoWindow({content:"<div>\n\t\t\t\t\t\t<span>Latitude: ".concat(i.lat,"</span><br/>\n\t\t\t\t\t\t<span>Longitude: ").concat(i.long,"</span><br/>\n\t\t\t\t\t\t<span>Device ID: ").concat(i.device_id,"</span><br/>\n\t\t\t\t\t\t<span>Device name: ").concat(i.devicename,"</span><br/>\n\t\t\t\t\t\t<span>Status: ").concat(i.status_occ_add,"</span><br/>\n\t\t\t\t\t\t<span>Port number: ").concat(i.deviceportnumber,"</span><br/>\n\t\t\t\t\t\t<span>Idle port: ").concat(i.portidlenumber,"</span>\n\t\t\t\t\t</div>")}),q[a].addListener("mouseover",(function(){q.map((function(t){return t.infoWindow.close()})),q[a].infoWindow.open(t,q[a])})),q[a].addListener("mouseout",(function(){q[a].infoWindow.close()})),q[a].addListener("click",(function(){q.map((function(t){return t.infoWindow.close()})),q[a].infoWindow.open(t,q[a]),c.route({origin:"".concat(n,",").concat(e),destination:"".concat(i.lat,",").concat(i.long),travelMode:"WALKING"},(function(n,e){"OK"===e?(f.setMap(t),f.setDirections(n)):window.alert("Directions request failed due to "+e)}))}))}))})).catch((function(t){i.a.isCancel(t)||(console.log(t),R("Fetching ODP failed!"))}))},$=function(){window.google.maps.event.addListener(s,"place_changed",(function(){var e=s.getPlace();if(e.geometry){var o=e.geometry,a=o.location;o.viewport?t.fitBounds(e.geometry.viewport):(t.setCenter(e.geometry.location),t.setZoom(16)),n.setPosition(a),n.setVisible(!0),N("Fetching data..."),r.setMap(null),Q(a.lat(),a.lng())}else alert("Quota exceeded!")})),n.addListener("click",(function(){console.log(Y)})),t.addListener("click",(function(t){E.current&&(E.current.value=""),n.setPosition(t.latLng),n.setVisible(!0),N("Fetching data..."),r.setMap(null),Q(t.latLng.lat(),t.latLng.lng())}))};return a.a.createElement("div",{className:"map-page",style:{height:window.innerHeight}},a.a.createElement("div",{className:"map-container",ref:h}),a.a.createElement("div",{className:"map-top"},a.a.createElement("input",{placeholder:"Search here...",className:"map-top-search",ref:E}),a.a.createElement("img",{src:g.a,alt:"find-me",className:"map-top-findme",onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var o=e.coords;E.current&&(E.current.value="");var a={lat:o.latitude,lng:o.longitude};n.setPosition(a),n.setVisible(!0),r.setMap(null),t.setCenter(a),t.setZoom(17),Q(o.latitude,o.longitude)}),(function(){alert("The Geolocation service failed.")})):alert("Your browser doesn't support geolocation.")}})),a.a.createElement("div",{className:"map-radius-icon",onClick:function(){J(!0)}}),G?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"map-radius-bg",onClick:function(){J(!1)}}),a.a.createElement("div",{className:"map-radius-con"},a.a.createElement("span",null,"Radius: ",H),a.a.createElement("input",{type:"range",min:"100",max:"300",step:"25",value:H,onChange:function(t){Z(t.target.value)}}))):a.a.createElement(a.a.Fragment,null),a.a.createElement("input",{type:"number",ref:C,value:H,readOnly:!0,style:{display:"none"}}),a.a.createElement("div",{className:"map-bottom",ref:O,"data-show":Y,onTouchStart:function(t){W(t.touches[0].clientY)},onTouchMove:function(t){var n=t.changedTouches[0].clientY,e=window.innerHeight-I,o=window.innerHeight-n+e;Y&&(e=200-(window.innerHeight-I),o=200-(n-(window.innerHeight-200)-e),window),o>200&&(o=200),O.current.style.transition="none",O.current.style.bottom=o+"px"},onTouchEnd:function(){Number(O.current.style.bottom.replace("px",""))>100?(O.current.style.transition=".3s",O.current.style.bottom="200px",B(!0)):(O.current.style.transition=".3s",O.current.style.bottom="20px",B(!1))}},L?a.a.createElement("div",{className:"map-bottom-nopick"},P):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"map-bottom-data map-bottom-body"},S),a.a.createElement("div",{className:"map-bottom-odp map-bottom-body"},_))))}}}]);
//# sourceMappingURL=3.bundle.js.map