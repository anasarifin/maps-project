(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{48:function(e,t,n){var a=n(4),o=n(49);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},49:function(e,t,n){(t=n(5)(!1)).push([e.i,'.map-page{width:100vw;height:100vh}.map-container{width:100%;height:100%}.map-infowindow{max-width:200px;font-size:1.1rem;font-weight:bold}.map-info,.map-drawer{position:fixed;background-color:white;padding:20px;border-radius:5px;box-shadow:0 0.5px 2px 1px rgba(0,0,0,0.3);left:50%;bottom:10px;transform:translate(-50%)}.map-info{max-width:320px;font-size:1.1rem;text-align:center}.map-info .odp{margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid rgba(0,0,0,0.5)}.map-menu{position:fixed;top:10px;left:10px;border-radius:3px}.map-search-bar{display:block;box-shadow:0 0.5px 2px 1px rgba(0,0,0,0.3);outline:none;border:none;border-radius:3px;width:340px;height:40px;margin-bottom:10px;padding:0 10px;font-size:1.1rem}.map-radius-slider{display:inline-block;background-color:white;width:max-content;padding:10px;border-radius:3px;box-shadow:0 0.5px 2px 1px rgba(0,0,0,0.3)}.map-radius-slider span{margin-right:10px}.map-source-option{margin:16px 0}.map-source-option span{background-color:white;font-size:1.2rem;padding:7px 10px;border-radius:3px;box-shadow:0 0.5px 2px 1px rgba(0,0,0,0.3);margin-right:15px;cursor:pointer}.map-source-option span:nth-child(4){margin:0}.map-source-option span.active{color:red}.map-button{position:fixed;right:10px;bottom:100px}.map-button svg{cursor:pointer;background-color:white;padding:8px;margin-bottom:10px;display:block;border-radius:5px;box-shadow:0 0.5px 2px 1px rgba(0,0,0,0.3);width:46px;height:46px;color:rgba(0,0,0,0.8)}.map-button svg:hover{background-color:whitesmoke;color:black}.map-drawer{display:block;width:240px}.map-drawer-option{display:grid;grid-template-columns:repeat(3, 1fr);gap:10px;justify-items:center;margin-bottom:15px}.map-drawer-option .option{cursor:pointer;width:30px;height:30px;color:rgba(0,0,0,0.8)}.map-drawer-option .option.active{color:red}.map-drawer-option .option:hover{color:red}#exitEditor{width:100%;text-align:center;cursor:pointer;border-top:1px solid rgba(0,0,0,0.5);padding-top:15px}#exitEditor:hover{color:red}.map-save{position:fixed;top:10px;left:50%;transform:translate(-50%)}.map-save input{width:360px;height:30px;padding:25px 50px 25px 15px;box-shadow:0 0.5px 2px 1px rgba(0,0,0,0.3);outline:none;border:none;border-radius:3px}.map-save #savePolygon{position:absolute;top:50%;right:10px;width:30px;height:30px;transform:translateY(-50%)}.map-save #savePolygon:hover{color:red}.map-street{position:fixed;left:10px;bottom:10px;background-color:white;box-shadow:0 0.5px 2px 1px rgba(0,0,0,0.3);padding:15px;border-radius:5px}.map-street .list{margin-top:10px;padding-top:10px;border-top:1px solid rgba(0,0,0,0.5)}.map-underspec{position:fixed;right:10px;top:10px;background-color:white;border-radius:5px;box-shadow:0 0.5px 2px 1px rgba(0,0,0,0.3)}.hide{display:none !important}table,th,td{border:1px solid black;border-collapse:collapse}th,td{padding:10px;text-align:center}a[href^="http://maps.google.com/maps"],a[href^="https://maps.google.com/maps"],a[href^="https://www.google.com/maps"]{display:none !important}.gmnoprint:not(.gm-bundled-control){display:none}\n',""]),e.exports=t},54:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(15),i=n.n(r),l=n(24),s=n.n(l),c=n(52),d=(n(48),function(e){var t=e.inputRef,n=e.radiusRef,a=e.radius,r=e.setRadius,i=e.source,l=e.setSource,s=e.sourceRef,c=e.hide;return o.a.createElement("div",{className:"map-menu"+(c?" hide":"")},o.a.createElement("input",{className:"map-search-bar",ref:t,placeholder:"Search here..."}),o.a.createElement("div",{className:"map-source-option","data-source":i,ref:s},o.a.createElement("span",{className:"option"+(0==i?" active":"")},"SIIS"),o.a.createElement("span",{className:"option"+(1==i?" active":""),onClick:function(){l(1)}},"UIM"),o.a.createElement("span",{className:"option"+(2==i?" active":""),onClick:function(){l(2)}},"Valins"),o.a.createElement("span",{className:"option"+(3==i?" active":""),onClick:function(){l(3)}},"Underspec")),o.a.createElement("div",{className:"map-radius-slider"+(3==i?" hide":"")},o.a.createElement("span",null,"Radius: ",a),o.a.createElement("input",{ref:n,type:"range",min:"100",max:"300",step:"25",value:a,onChange:function(e){r(parseFloat(e.target.value))}})))}),p=function(e){var t=e.infoRef,n=e.locationName,a=e.status,r=e.odpStatus,i=e.loading,l=e.hide;return o.a.createElement("div",{className:"map-info"+(l?" hide":""),ref:t},i?o.a.createElement("div",{className:"loading"},a):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"odp"},r),o.a.createElement("div",{className:"address"},n)))},u=n(25),m=function(e){var t=e.mode;return Object(a.useEffect)((function(){console.log(t)}),[t]),o.a.createElement("div",{className:"map-drawer"+("normal"==t?" hide":"")},o.a.createElement("div",{className:"map-drawer-option"},o.a.createElement(u.c,{id:"rectangleMode","data-place":"top","data-mode":"rectangle","data-tip":"Rectangle",className:"option"+("rectangle"==t?" active":"")}),o.a.createElement(u.d,{id:"polygonMode","data-place":"top","data-mode":"polygon","data-tip":"Custom",className:"option"+("polygon"==t?" active":"")}),o.a.createElement(u.e,{id:"deleteMode","data-place":"top","data-mode":"delete","data-tip":"Delete",className:"option"+("delete"==t?" active":"")})),o.a.createElement("div",{className:"map-drawer-button"},o.a.createElement("div",{id:"exitEditor"},"Exit Editor")))},g=n(26),f=function(e){var t=e.hide,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current.value=""}),[t]),o.a.createElement("div",{className:"map-save"+(t?" hide":"")},o.a.createElement("input",{placeholder:"Input address...",ref:n}),o.a.createElement(g.c,{id:"savePolygon"}))},v=function(e){var t=e.findMe,n=e.hide;return o.a.createElement("div",{className:"map-button"},o.a.createElement("div",{className:n?"hide":""},o.a.createElement(g.a,{id:"drawingMode","data-tip":"Editor Mode"}),o.a.createElement(g.b,{onClick:t,"data-tip":"Find My Location"})),o.a.createElement(u.b,{id:"zoomIn","data-tip":"Zoom In"}),o.a.createElement(u.a,{id:"zoomOut","data-tip":"Zoom Out"}))},w=function(e){var t=e.underspec,n=e.hide;return o.a.createElement("div",{className:"map-underspec"+(n?" hide":"")},o.a.createElement("table",null,o.a.createElement("tr",null,o.a.createElement("th",null,"No. INET"),o.a.createElement("th",null,"RX OLT"),o.a.createElement("th",null,"RX ONT"),o.a.createElement("th",null,"Klasifikasi")),t.map((function(e){return o.a.createElement("tr",null,o.a.createElement("td",null,e.inet),o.a.createElement("td",null,e.olt_rx_pwr),o.a.createElement("td",null,e.onu_rx_pwr),o.a.createElement("td",null,(t=parseFloat(e.onu_rx_pwr),n=parseFloat(e.olt_rw_pwr),(a=t<n?t:n)>=-24?"Very good":a<-24&&a>=-27?"Good":a<-27&&a>=-30?"Poor":a<-30?"Bad":"")));var t,n,a}))))},h=function(e){var t=e.streetList,n=e.status,a=e.hide;e.ref;return o.a.createElement("div",{className:"map-street"+(a?" hide":"")},o.a.createElement("div",null,n),t.length?o.a.createElement("div",{className:"list"},t.map((function(e){return o.a.createElement("div",null,e)}))):o.a.createElement(o.a.Fragment,null))};function b(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t,n,a,o,r,i){try{var l=e[r](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,o)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(e){x(r,a,o,i,l,"next",e)}function l(e){x(r,a,o,i,l,"throw",e)}i(void 0)}))}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,o=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw r}}return n}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var O=s()(i.a),D=s()(i.a),L=s()(i.a),N={lat:-6.2088,lng:106.8456},S=function(e){return e.toLowerCase().split(" ").map((function(e){var t;return e.replace(e[0],null===(t=e[0])||void 0===t?void 0:t.toUpperCase())})).join(" ")};t.default=function(){var e,t,n,r,l,s,u,g,x,k,M,_=Object(a.useRef)(null),I=Object(a.useRef)(null),F=Object(a.useRef)(null),C=Object(a.useRef)(null),P=Object(a.useRef)(null),R=Object(a.useRef)(null),j=E(Object(a.useState)(""),2),T=j[0],A=j[1],W=E(Object(a.useState)(""),2),B=W[0],z=W[1],G=E(Object(a.useState)(""),2),K=G[0],Z=G[1],U=E(Object(a.useState)([]),2),V=U[0],J=U[1],Y=E(Object(a.useState)(""),2),X=Y[0],q=Y[1],H=E(Object(a.useState)("normal"),2),Q=H[0],$=H[1],ee=E(Object(a.useState)(!0),2),te=ee[0],ne=ee[1],ae=E(Object(a.useState)(!1),2),oe=ae[0],re=ae[1],ie=E(Object(a.useState)(200),2),le=ie[0],se=ie[1],ce=E(Object(a.useState)(0),2),de=ce[0],pe=ce[1],ue=E(Object(a.useState)([]),2),me=ue[0],ge=ue[1],fe=[],ve=[];Object(a.useEffect)((function(){var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyCXU3EeZo0yexMDnmkigGJJvTvcVDpgPl0","&libraries=places,geometry,drawing"),window.document.body.appendChild(a),a.addEventListener("load",y(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e=new window.google.maps.Map(_.current,{zoom:15,center:N,clickableIcons:!1,disableDefaultUI:!0,gestureHandling:"greedy"}),t=new window.google.maps.Marker({map:e,visible:!1,zIndex:2}),n=new window.google.maps.InfoWindow,o=C.current,(s=new window.google.maps.places.Autocomplete(o,{fields:["geometry","name"],componentRestrictions:{country:["id"]}})).bindTo("bounds",e),r=new window.google.maps.Circle({map:e,strokeColor:"#FF0000",strokeOpacity:0,strokeWeight:0,fillColor:"#FF0000",fillOpacity:.2,clickable:!1}),l=new window.google.maps.Polygon({map:e,paths:[],strokeWeight:2,strokeColor:"#FF3300",fillOpacity:0,clickable:!1}),i={editable:!0,draggable:!0,strokeColor:"#FF3300",strokeWeight:2,fillOpacity:.5,fillColor:"#FF3300"},(u=new window.google.maps.drawing.DrawingManager({polygonOptions:i,rectangleOptions:i})).setMap(e),x=new window.google.maps.DirectionsService,k=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,preserveViewport:!1}),M=new window.google.maps.DistanceMatrixService,we();case 15:case"end":return a.stop()}}),a)}))))}),[]);var we=function(){e.addListener("click",(function(e){if("normal"!=_.current.dataset.mode)return!1;C.current&&(C.current.value=""),he(e.latLng.lat(),e.latLng.lng(),P.current.value,parseInt(R.current.dataset.source))})),window.google.maps.event.addListener(s,"place_changed",(function(){var t=s.getPlace();if(t.geometry){var n=t.geometry,a=n.location;n.viewport?e.fitBounds(t.geometry.viewport):(e.setCenter(t.geometry.location),e.setZoom(16)),he(a.lat(),a.lng(),P.current.value,parseInt(R.current.dataset.source))}else console.log("Quota exceeded!")})),window.google.maps.event.addListener(u,"polygoncomplete",(function(e){var t;$("hand"),null===(t=g)||void 0===t||t.shape.setMap(null),u.setDrawingMode(null),g={type:"polygon",shape:e},re(!0)})),window.google.maps.event.addListener(u,"rectanglecomplete",(function(e){var t;$("hand"),null===(t=g)||void 0===t||t.shape.setMap(null),u.setDrawingMode(null),g={type:"rectangle",shape:e},re(!0)}));var n=document.getElementById("savePolygon");window.google.maps.event.addDomListener(n,"click",(function(){ke()}));var a=document.getElementById("exitEditor");window.google.maps.event.addDomListener(a,"click",(function(){var e;null===(e=g)||void 0===e||e.shape.setMap(null),re(!1),u.setDrawingMode(null),$("normal")}));var o=document.getElementById("drawingMode");window.google.maps.event.addDomListener(o,"click",(function(){var e;null===(e=u)||void 0===e||e.setDrawingMode(window.google.maps.drawing.OverlayType.RECTANGLE),$("rectangle")}));var r=document.getElementById("zoomIn");window.google.maps.event.addDomListener(r,"click",(function(){e.setZoom(e.getZoom()+1)}));var i=document.getElementById("zoomOut");window.google.maps.event.addDomListener(i,"click",(function(){e.setZoom(e.getZoom()-1)}));var l=document.getElementsByClassName("map-source-option")[0];window.google.maps.event.addDomListener(l,"click",(function(e){if(e.target.classList.contains("option"))switch(e.target.innerText){case"SIIS":pe(0),t.visible&&be(t.getPosition().lat(),t.getPosition().lng(),P.current.value,0);break;case"UIM":pe(1),t.visible&&be(t.getPosition().lat(),t.getPosition().lng(),P.current.value,1);break;case"Valins":pe(2),t.visible&&be(t.getPosition().lat(),t.getPosition().lng(),P.current.value,2);break;case"Underspec":pe(3),t.visible&&be(t.getPosition().lat(),t.getPosition().lng(),P.current.value,3)}}));var c=document.getElementById("rectangleMode");window.google.maps.event.addDomListener(c,"click",(function(){var e,t,n,a;"rectangle"!=_.current.dataset.mode?($("rectangle"),null===(e=g)||void 0===e||e.shape.setMap(null),re(!1),null===(t=u)||void 0===t||t.setDrawingMode(window.google.maps.drawing.OverlayType.RECTANGLE)):($("hand"),null===(n=g)||void 0===n||n.shape.setMap(null),re(!1),null===(a=u)||void 0===a||a.setDrawingMode(null))}));var d=document.getElementById("polygonMode");window.google.maps.event.addDomListener(d,"click",(function(){var e,t,n,a;"polygon"!=_.current.dataset.mode?($("polygon"),null===(e=g)||void 0===e||e.shape.setMap(null),re(!1),null===(t=u)||void 0===t||t.setDrawingMode(window.google.maps.drawing.OverlayType.POLYGON)):($("hand"),null===(n=g)||void 0===n||n.shape.setMap(null),re(!1),null===(a=u)||void 0===a||a.setDrawingMode(null))}));var p=document.getElementById("deleteMode");window.google.maps.event.addDomListener(p,"click",(function(){var e,t,n,a;"delete"!=_.current.dataset.mode?($("delete"),null===(e=g)||void 0===e||e.shape.setMap(null),re(!1),null===(t=u)||void 0===t||t.setDrawingMode(null)):($("hand"),null===(n=g)||void 0===n||n.shape.setMap(null),re(!1),null===(a=u)||void 0===a||a.setDrawingMode(null))}))},he=function(n,a,o,s){ve.map((function(e){return e.setMap(null)})),k&&k.setMap(null),ne(!0),J([]),q(""),z("Fetching data..."),t.setPosition({lat:n,lng:a}),t.setVisible(!0),l.setMap(null),r.setMap(null),3!=s&&r.setMap(e),r.setCenter({lat:n,lng:a}),r.setRadius(parseFloat(o)),O({url:"https://siis-api.udata.id/point_kelurahan/".concat(a,",").concat(n)}).then(function(){var t=y(regeneratorRuntime.mark((function t(r){var i,c,d,p,u,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.data.data[0],c=i.shape.slice(11,-2).split(", ").map((function(e){var t=e.split(" ");return{lat:parseFloat(t[1]),lng:parseFloat(t[0])}})),l.setPath(c),l.setMap(e),t.next=6,ye(n,a);case 6:d=t.sent,p="KOTA"==i.kabupaten.split(" ")[0],u=p?i.kabupaten.replace("KOTA ",""):i.kabupaten,m="".concat(d,"Kel. ").concat(S(i.kelurahan),", Kec. ").concat(S(i.kecamatan),", ").concat(p?"Kota":"Kab."," ").concat(S(u),", ").concat(S(i.provinsi).replace("Dki","DKI")),ne(!1),A(m),xe(n,a),be(n,a,o,s);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){i.a.isCancel(e)||(console.log(e),z("Fetching data failed!"))}))},be=function(a,o,r,l){Z("Fetching ODP data...");var s="";switch(l){case 0:s="siis";break;case 1:s="uim";break;case 2:s="valins";break;case 3:s="underspec"}var c={};c=3!=l?{lat:a.toString(),long:o.toString(),radius:r}:{lat:a.toString(),long:o.toString()},D({url:"http://odpmap-ms-api-dev.vsan-apps.playcourt.id/api/odp/v1/get-odp-".concat(s),method:"post",data:c,auth:{username:"telkom",password:"da1c25d8-37c8-41b1-afe2-42dd4825bfea"}}).then((function(r){var i=function(e,t){switch(t){case 0:case 1:return e.map((function(e){return{id:e.device_id,name:e.devicename,latitude:e.lat,longitude:e.long,status:e.status_occ_add,idle_port:parseFloat(e.portidlenumber),device_port:parseFloat(e.deviceportnumber)}}));case 2:return e.map((function(e){return{id:e.odp_eid,name:e.odp_name,latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),status:e.status_occ_add,idle_port:parseFloat(e.portidlenumber),device_port:e.deviceportnumber}}));case 3:return e.map((function(e){return{id:e.odp_eid,name:e.odp_name.toUpperCase(),latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),status:e.status_occ_add,idle_port:parseFloat(e.portidlenumber),device_port:e.deviceportnumber,underspec_detail:e.underspec_detail.filter((function(e){return null!=e.hasil_ukur.inet})).map((function(e){return e.hasil_ukur}))}}));default:return[]}}(r.data.data,l),s=0;if(i.length){var c=i.map((function(e){return e.device_port})).reduce((function(e,t){return e+t})),d=i.map((function(e){return e.idle_port})).reduce((function(e,t){return e+t}));s=parseFloat((d/c*100).toFixed(1))}Z("".concat(i.length," ODP found (").concat(s,"%)")),ve=[],3!=l?(e.setCenter({lat:a,lng:o}),i.length&&e.setZoom(18)):i.length&&e.setZoom(16),i.forEach((function(r,i){var s;switch(r.status){case"RED":s="red";break;case"YELLOW":s="yellow";break;case"GREEN":s="green";break;default:s="black"}ve.push(new window.google.maps.Marker({map:e,position:{lat:r.latitude,lng:r.longitude},icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:6,fillColor:s,fillOpacity:.9,strokeWeight:0}})),ve[i].latlng={lat:r.latitude,lng:r.longitude},ve[i].index=i,ve[i].distance=window.google.maps.geometry.spherical.computeDistanceBetween(t.getPosition(),ve[i].getPosition());var c='\n                    <div class="map-infowindow">\n                        <span>Device ID: '.concat(r.id,"</span><br/>\n                        <span>Device name: ").concat(r.name,"</span><br/>\n                        <span>Status: ").concat(r.status,"</span><br/>\n                        <span>Device Port: ").concat(r.device_port,"</span><br/>\n                        <span>Idle Port: ").concat(r.idle_port,'</span>\n                        <span id="infoDistance"></span>\n                    </div>');ve[i].infoWindow=new window.google.maps.InfoWindow({content:c,zIndex:2}),ve[i].addListener("mouseover",(function(){3==l&&ge(r.underspec_detail),n.close(),ve.map((function(e){return e.infoWindow.close()})),ve[i].infoWindow.open(e,ve[i])})),ve[i].addListener("mouseout",(function(){3==l&&ge([]),ve[i].infoWindow.close()})),ve[i].addListener("click",(function(){ve.map((function(e){return e.infoWindow.close()})),ve[i].infoWindow.open(e,ve[i]),x.route({origin:"".concat(a,",").concat(o),destination:"".concat(r.latitude,",").concat(r.longitude),travelMode:"WALKING"},(function(t,n){if("OK"===n){console.log(t.routes[0].legs[0].distance.value);var a=document.getElementById("infoDistance");a&&(a.innerHTML="<br/>Distance: ".concat(t.routes[0].legs[0].distance.value," m")),k.setMap(e),k.setDirections(t)}else console.log("Directions request failed due to "+n)}))}))}));var p=ve.map((function(e){return{distance:e.distance,index:e.index,latlng:e.latlng}})).sort((function(e,t){return e.distance-t.distance})).filter((function(e,t){return t<3}));Ee(p)})).catch((function(e){i.a.isCancel(e)||(console.log(e),Z("Fetching ODP failed!"))}))},xe=function(e,t){q("Loading street data..."),L({url:"https://siis-api.udata.id/point_to_address",method:"post",data:{lat:e.toString(),long:t.toString(),radius:"50"}}).then((function(e){if("success"==e.data.status){var t=e.data.data.filter((function(e){return" "!=e.st_name})).map((function(e){return S(e.st_name)}));if(t.length>0){var n=b(new Set(t));q("".concat(n.length," street").concat(n.length>1?"s":""," found")),J(n)}else q("No street data found!")}else console.log(e.data),q("No street data found!")})).catch((function(e){console.log(e),q("Fetching street data failed!")}))},ye=function(e,t){return new Promise((function(n){i.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e,",").concat(t,"&key=AIzaSyCXU3EeZo0yexMDnmkigGJJvTvcVDpgPl0")).then((function(e){var t=e.data.results[0].address_components.filter((function(e){return"route"==e.types[0]}));t.length>0?n("".concat(t[0].short_name,", ")):n("")})).catch((function(){n("")}))}))},Ee=function(n){M.getDistanceMatrix({origins:[t.getPosition()],destinations:n.map((function(e){return new window.google.maps.LatLng(e.latlng.lat,e.latlng.lng)})),travelMode:"WALKING"},(function(t,a){"OK"===a?n.forEach((function(a,o){ve[n[o].index].infoDistance=new window.google.maps.InfoWindow({content:"<div>\n\t\t\t\t\t\t\t<span>".concat(t.rows[0].elements[o].distance.value," m</span>\n\t\t\t\t\t\t</div>")}),ve[n[o].index].infoDistance.open(e,ve[n[o].index])})):console.log("Distances request failed due to "+a)}))},ke=function(){var t,n,a,o,r=[];if("polygon"==(null===(t=g)||void 0===t?void 0:t.type))r=g.shape.getPath().getArray().map((function(e){return new window.google.maps.LatLng(e.lat(),e.lng())})),null===(o=u)||void 0===o||o.setDrawingMode(window.google.maps.drawing.OverlayType.POLYGON);else if("rectangle"==(null===(n=g)||void 0===n?void 0:n.type)){var i,l=g.shape.getBounds(),s=l.getNorthEast(),c=l.getSouthWest();r=[new window.google.maps.LatLng(c.lat(),s.lng()),l.getNorthEast(),new window.google.maps.LatLng(s.lat(),c.lng()),l.getSouthWest()],null===(i=u)||void 0===i||i.setDrawingMode(window.google.maps.drawing.OverlayType.RECTANGLE)}var d=new window.google.maps.Polygon({map:e,paths:r,strokeColor:"#FF3300",strokeWeight:2,fillOpacity:.5,fillColor:"#FF3300",clickable:!0});d.addListener("mouseover",(function(){"delete"==_.current.dataset.mode&&d.setOptions({fillColor:"#00FF00"})})),d.addListener("mouseout",(function(){d.setOptions({fillColor:"#FF3300"})})),d.addListener("click",(function(){"delete"==_.current.dataset.mode&&d.setMap(null)})),null===(a=g)||void 0===a||a.shape.setMap(null),g&&fe.push(d),re(!1)};return o.a.createElement("div",{className:"map-page"},o.a.createElement("div",{className:"map-container",ref:_,"data-mode":Q}),o.a.createElement(d,{inputRef:C,radiusRef:P,radius:le,setRadius:function(e){se(e)},source:de,setSource:function(e){pe(e)},sourceRef:R,hide:"normal"!=Q}),o.a.createElement(p,{infoRef:I,locationName:T,status:B,odpStatus:K,loading:te,hide:"normal"!=Q||!B}),o.a.createElement(v,{findMe:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var n=t.coords;C.current&&(C.current.value="");var a={lat:n.latitude,lng:n.longitude};e.setCenter(a),e.setZoom(17),he(n.latitude,n.longitude,P.current.value,parseInt(R.current.dataset.source))}),(function(){alert("The Geolocation service failed.")})):alert("Your browser doesn't support geolocation.")},hide:"normal"!=Q}),o.a.createElement(m,{mode:Q}),o.a.createElement(f,{hide:!oe}),o.a.createElement(w,{underspec:me,hide:!me.length}),o.a.createElement(h,{streetList:V,status:X,ref:F,hide:"normal"!=Q||!B||!X}),o.a.createElement(c.a,{effect:"solid",place:"left"}))}}}]);
//# sourceMappingURL=3.bundle.js.map