(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{11:function(t,e,n){"use strict";e.a=n.p+"src/images/my_location.png"},43:function(t,e,n){var o=n(22),a=n(44);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r={insert:"head",singleton:!1};o(a,r);t.exports=a.locals||{}},44:function(t,e,n){(e=n(23)(!1)).push([t.i,'body {\n\toverscroll-behavior: contain;\n\toverflow: hidden;\n}\nimg:press {\n\toutline: none;\n}\n.map-page {\n\twidth: 100vw;\n}\n.map-container {\n\twidth: 100%;\n\theight: 100%;\n}\n.map-top {\n\tposition: fixed;\n\tdisplay: grid;\n\tgrid-template-columns: auto 50px;\n\ttop: 10px;\n\twidth: 95%;\n\tmax-width: 600px;\n\theight: 50px;\n\tbackground-color: white;\n\tborder-radius: 5px;\n\tleft: 50%;\n\ttransform: translate(-50%);\n\tbox-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.4);\n}\n.map-top-search {\n\toutline: none;\n\tpadding-left: 17px;\n\tborder: none;\n\tborder-radius: 5px;\n}\n.map-top-findme {\n\tjustify-self: center;\n\talign-self: center;\n}\n.map-radius-icon {\n\tposition: absolute;\n\tright: 10px;\n\ttop: 80px;\n\twidth: 40px;\n\theight: 40px;\n\tbackground-color: salmon;\n\tz-index: 2;\n\tborder-radius: 5px;\n\tbox-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.4);\n}\n.map-radius-con {\n\tposition: absolute;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n\tjustify-items: center;\n\tvertical-align: center;\n\ttop: 80px;\n\twidth: 95%;\n\tmax-width: 600px;\n\theight: 100px;\n\tfont-size: larger;\n\tfont-weight: bold;\n\tbackground-color: white;\n\tbox-sizing: border-box;\n\tpadding: 20px;\n\tborder-radius: 5px;\n\tleft: 50%;\n\ttransform: translate(-50%);\n\tbox-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.4);\n\tz-index: 4;\n}\n.map-radius-con input {\n\twidth: 80%;\n}\n.map-radius-bg {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tz-index: 3;\n}\n.map-bottom {\n\tposition: fixed;\n\tbottom: 20px;\n\twidth: 100%;\n\theight: 200px;\n\tbackground-color: white;\n\tborder-radius: 15px 15px 0 0;\n\ttransform: translate3d(0, 100%, 0);\n\tpadding: 30px;\n\tbox-sizing: border-box;\n\tbox-shadow: 0 0 4px 4px rgba(0, 0, 0, 0.3);\n}\n.map-bottom-body {\n\twidth: 100%;\n\tmargin-bottom: 15px;\n\tbackground-color: #0288d1;\n\tborder-radius: 3px;\n\tpadding: 10px;\n\tbox-sizing: border-box;\n\tfont-size: larger;\n\tcolor: white;\n}\n.map-bottom-nopick {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\ttext-align: center;\n\tbackground-color: white;\n\tcolor: black;\n\tfont-size: xx-large;\n}\n.map-bottom-odp {\n\ttext-align: center;\n}\n\n.gm-style-cc {\n\tdisplay: none !important;\n}\n.gm-style a[href^="https://maps.google.com/maps"]\n{\n\tdisplay: none !important;\n}\n',""]),t.exports=e},46:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(12),i=n.n(r),c=n(21),s=n.n(c),l=(n(43),n(11));function p(t,e,n,o,a,r,i){try{var c=t[r](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(o,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var r=t.apply(e,n);function i(t){p(r,o,a,i,c,"next",t)}function c(t){p(r,o,a,i,c,"throw",t)}i(void 0)}))}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var g=s()(i.a),f=s()(i.a),b={lat:-6.2088,lng:106.8456};function h(t){return t.toLowerCase().split(" ").map((function(t){return t.replace(t[0],t[0].toUpperCase())})).join(" ")}e.default=function(){var t,e,n,r,c,s,p,m=Object(o.useRef)(),w=Object(o.useRef)(),v=Object(o.useRef)(),y=Object(o.useRef)(),x=d(Object(o.useState)(""),2),k=x[0],E=x[1],O=d(Object(o.useState)("No location selected."),2),C=O[0],j=O[1],F=d(Object(o.useState)(!0),2),S=F[0],M=F[1],N=d(Object(o.useState)(""),2),D=N[0],L=N[1],T=d(Object(o.useState)(0),2),P=T[0],R=T[1],I=d(Object(o.useState)("200"),2),W=I[0],z=I[1],A=d(Object(o.useState)(!1),2),_=A[0],K=A[1],H=d(Object(o.useState)(!1),2),Z=H[0],G=H[1],J=[];Object(o.useEffect)((function(){var o=document.createElement("script");o.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyCXU3EeZo0yexMDnmkigGJJvTvcVDpgPl0","&libraries=places,geometry"),window.document.body.appendChild(o),o.addEventListener("load",u(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=new window.google.maps.Map(m.current,{zoom:15,center:b,clickableIcons:!1,disableDefaultUI:!0,gestureHandling:"greedy",mapTypeControlOptions:{position:window.google.maps.ControlPosition.BOTTOM_CENTER}}),e=new window.google.maps.Marker({map:t,visible:!1}),(c=new window.google.maps.places.Autocomplete(w.current,{fields:["geometry","name"],types:["geocode"],componentRestrictions:{country:["id"]}})).bindTo("bounds",t),n=new window.google.maps.Circle({map:t,strokeColor:"#FF0000",strokeOpacity:0,strokeWeight:0,fillColor:"#FF0000",fillOpacity:.2,clickable:!1}),r=new window.google.maps.Polygon({map:t,paths:[],strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillOpacity:0,clickable:!1}),s=new window.google.maps.DirectionsService,p=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,preserveViewport:!0}),B();case 9:case"end":return o.stop()}}),o)}))))}),[]);var U=function(o,a){J.map((function(t){return t.setMap(null)})),p&&p.setMap(null),e.setPosition({lat:o,lng:a}),e.setVisible(!0),r.setMap(null),t.panTo({lat:o,lng:a}),n.setMap(null),n.setMap(t),n.setCenter({lat:o,lng:a}),n.setRadius(parseFloat(y.current.value)),M(!0),j("Fetching data..."),g({url:"https://siis-api.udata.id/point_kelurahan/".concat(a,",").concat(o)}).then((function(e){var n=e.data.data[0],i=n.provinsi,c=n.kabupaten,s=n.kecamatan,l=n.kelurahan,p=n.shape.slice(11,-2).split(", ").map((function(t){var e=t.split(" ");return{lat:parseFloat(e[1]),lng:parseFloat(e[0])}}));r.setPath(p),r.setMap(t);var u="KOTA"===c.split(" ")[0]?c.replace("KOTA ",""):c,d="Kel. ".concat(h(l),", Kec. ").concat(h(s),", ").concat(u?"Kota":"Kab."," ").concat(h(u),", ").concat(h(i).replace("Dki","DKI"));M(!1),E(d),L("Fetching ODP data..."),v.current.style.transition=".3s",v.current.style.bottom="200px",G(!0),Y(o,a)})).catch((function(t){i.a.isCancel(t)||(console.log(t),j("Fetching failed!"))}))},Y=function(e,n){f({url:"http://digitasi-consumer-siis-dev.vsan-apps.playcourt.id/api/siis/v1/get-odp",method:"post",data:{lat:e,long:n,radius:y.current.value},auth:{username:"telkom",password:"da1c25d8-37c8-41b1-afe2-42dd4825bfea"}}).then((function(o){var a=o.data.data.features.filter((function(t){return t.attributes.portidlenumber>0})),r=0;if(a.length){var i=a.map((function(t){return t.attributes.deviceportnumber})).reduce((function(t,e){return t+e})),c=a.map((function(t){return t.attributes.portidlenumber})).reduce((function(t,e){return t+e}));r=parseFloat((c/i*100).toFixed(1))}L("".concat(a.length," ODP found (").concat(r,"%)")),J=[],t.setCenter({lat:e,lng:n}),a.length&&(parseFloat(y.current.value)<=150?t.setZoom(18):parseFloat(y.current.value)>=250?t.setZoom(16):t.setZoom(17)),"true"===v.current.dataset.show&&t.panBy(0,70),a.forEach((function(o,a){var r,i=o.attributes;switch(i.status_occ_add){case"RED":r="red";break;case"YELLOW":r="yellow";break;case"GREEN":r="green";break;default:r="black"}J.push(new window.google.maps.Marker({map:t,position:{lat:i.lat,lng:i.long},icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:6,fillColor:r,fillOpacity:.9,strokeWeight:0}})),J[a].infoWindow=new window.google.maps.InfoWindow({content:"<div>\n\t\t\t\t\t\t<span>Latitude: ".concat(i.lat,"</span><br/>\n\t\t\t\t\t\t<span>Longitude: ").concat(i.long,"</span><br/>\n\t\t\t\t\t\t<span>Device ID: ").concat(i.device_id,"</span><br/>\n\t\t\t\t\t\t<span>Device name: ").concat(i.devicename,"</span><br/>\n\t\t\t\t\t\t<span>Status: ").concat(i.status_occ_add,"</span><br/>\n\t\t\t\t\t\t<span>Port number: ").concat(i.deviceportnumber,"</span><br/>\n\t\t\t\t\t\t<span>Idle port: ").concat(i.portidlenumber,"</span>\n\t\t\t\t\t</div>")}),J[a].addListener("mouseover",(function(){J.map((function(t){return t.infoWindow.close()})),J[a].infoWindow.open(t,J[a])})),J[a].addListener("mouseout",(function(){J[a].infoWindow.close()})),J[a].addListener("click",(function(){J.map((function(t){return t.infoWindow.close()})),J[a].infoWindow.open(t,J[a]),s.route({origin:"".concat(e,",").concat(n),destination:"".concat(i.lat,",").concat(i.long),travelMode:"WALKING"},(function(e,n){"OK"===n?(p.setMap(t),p.setDirections(e)):window.alert("Directions request failed due to "+n)}))}))}))})).catch((function(t){i.a.isCancel(t)||(console.log(t),L("Fetching ODP failed!"))}))},B=function(){window.google.maps.event.addListener(c,"place_changed",(function(){var e=c.getPlace();if(e.geometry){var n=e.geometry,o=n.location;n.viewport?t.fitBounds(e.geometry.viewport):(t.setCenter(e.geometry.location),t.setZoom(16)),U(o.lat(),o.lng())}else alert("Quota exceeded!")})),t.addListener("click",(function(t){w.current&&(w.current.value=""),U(t.latLng.lat(),t.latLng.lng())}))};return a.a.createElement("div",{className:"map-page",style:{height:window.innerHeight}},a.a.createElement("div",{className:"map-container",ref:m}),a.a.createElement("div",{className:"map-top"},a.a.createElement("input",{placeholder:"Search here...",className:"map-top-search",ref:w}),a.a.createElement("img",{src:l.a,alt:"find-me",className:"map-top-findme",onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var n=e.coords;w.current&&(w.current.value="");var o={lat:n.latitude,lng:n.longitude};t.setCenter(o),t.setZoom(17),U(n.latitude,n.longitude)}),(function(){alert("The Geolocation service failed.")})):alert("Your browser doesn't support geolocation.")}})),a.a.createElement("div",{className:"map-radius-icon",onClick:function(){K(!0)}}),_?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"map-radius-bg",onClick:function(){K(!1)}}),a.a.createElement("div",{className:"map-radius-con"},a.a.createElement("span",null,"Radius: ",W),a.a.createElement("input",{type:"range",min:"100",max:"300",step:"25",value:W,onChange:function(t){z(t.target.value)}}))):a.a.createElement(a.a.Fragment,null),a.a.createElement("input",{type:"number",ref:y,value:W,readOnly:!0,style:{display:"none"}}),a.a.createElement("div",{className:"map-bottom",ref:v,"data-show":Z,onTouchStart:function(t){R(t.touches[0].clientY)},onTouchMove:function(t){var e=t.changedTouches[0].clientY,n=window.innerHeight-P,o=window.innerHeight-e+n;Z&&(n=200-(window.innerHeight-P),o=200-(e-(window.innerHeight-200)-n)),o>200&&(o=200),v.current.style.transition="none",v.current.style.bottom=o+"px"},onTouchEnd:function(){Number(v.current.style.bottom.replace("px",""))>100?(v.current.style.transition=".3s",v.current.style.bottom="200px",G(!0)):(v.current.style.transition=".3s",v.current.style.bottom="20px",G(!1))}},S?a.a.createElement("div",{className:"map-bottom-nopick"},C):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"map-bottom-data map-bottom-body"},k),a.a.createElement("div",{className:"map-bottom-odp map-bottom-body"},D))))}}}]);
//# sourceMappingURL=3.bundle.js.map