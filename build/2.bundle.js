(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{15:function(t,n,e){"use strict";n.a=e.p+"src/images/my_location.png"},43:function(t,n,e){var a=e(4),o=e(44);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1};a(o,i);t.exports=o.locals||{}},44:function(t,n,e){(n=e(5)(!1)).push([t.i,".map-page {\n\twidth: 100vw;\n\theight: 100vh;\n}\n.map-container {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.map-search-bar {\n\tposition: fixed;\n\tmargin-top: 10px;\n\tmargin-left: 10px;\n\tmax-width: 200px;\n\twidth: 70%;\n\theight: max-content;\n\tbackground: white;\n\tborder-radius: 3px;\n}\n.map-search-option {\n\tbox-sizing: border-box;\n\tcursor: pointer;\n\tbackground-color: whitesmoke;\n\tcolor: gray;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr 1fr;\n}\n.map-search-option div {\n\theight: 30px;\n\tline-height: 30px;\n\ttext-align: center;\n}\n.map-search-option div.active {\n\tbackground-color: white;\n\tcolor: black;\n}\n\n#map-search-name {\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n\n#map-popup {\n\twidth: max-content;\n\theight: max-content;\n}\n#map-popup span {\n\ttext-align: center;\n\tdisplay: block;\n}\n#map-popup-edit {\n\tmargin-top: 5px;\n\tcolor: blue;\n\tcursor: pointer;\n}\n\n#map-form {\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n}\n#map-form label {\n\tdisplay: block;\n\tmargin: 5px;\n}\n#map-form button {\n\tmargin-top: 15px;\n}\n\n.map-input-bg {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 0;\n\theight: 0;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n}\n.map-input-bg.show {\n\twidth: 100%;\n\theight: 100%;\n}\n.map-find-me {\n\tposition: fixed;\n\tbackground-color: white;\n\tmargin-right: 12px;\n}\n.map-radius-slider {\n\tbackground-color: white;\n\tposition: fixed;\n\tmargin-top: 10px;\n\tmargin-left: 10px;\n}\n#map-input-form {\n\tposition: fixed;\n\tdisplay: none;\n\tgrid-template-columns: 1fr;\n\tbackground-color: white;\n\tborder-radius: 5px;\n\tpadding: 15px;\n\ttop: 60%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\topacity: 0;\n\ttransition: 0.3s;\n}\n#map-input-form.show {\n\ttop: 50%;\n\topacity: 1;\n}\n#map-input-form input {\n\ttext-transform: uppercase;\n}\n#map-input-form label {\n\tdisplay: block;\n\tmargin: 7px;\n}\n#map-input-form button {\n\tmargin-top: 15px;\n}\n",""]),t.exports=n},47:function(t,n,e){"use strict";e.r(n);var a=e(0),o=e.n(a),i=e(16),r=e.n(i),c=e(25),s=e.n(c),l=(e(43),e(15));function p(t,n,e,a,o,i,r){try{var c=t[i](r),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(a,o)}function u(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var i=t.apply(n,e);function r(t){p(i,a,o,r,c,"next",t)}function c(t){p(i,a,o,r,c,"throw",t)}r(void 0)}))}}function d(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],a=!0,o=!1,i=void 0;try{for(var r,c=t[Symbol.iterator]();!(a=(r=c.next()).done)&&(e.push(r.value),!n||e.length!==n);a=!0);}catch(t){o=!0,i=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return m(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return m(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}var g=s()(r.a),f=s()(r.a),v={lat:-6.2088,lng:106.8456};n.default=function(){var t,n,e,i,c,s,p,m=Object(a.useRef)(null),h=Object(a.useRef)(null),b=Object(a.useRef)(null),w=Object(a.useRef)(null),y=d(Object(a.useState)(""),2),k=y[0],E=y[1],x=d(Object(a.useState)(""),2),C=x[0],L=x[1],O=d(Object(a.useState)("200"),2),M=O[0],P=O[1],T=d(Object(a.useState)(!0),2),F=T[0],S=T[1],I=[];Object(a.useEffect)((function(){var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyCXU3EeZo0yexMDnmkigGJJvTvcVDpgPl0","&libraries=places,geometry"),window.document.body.appendChild(a),a.addEventListener("load",u(regeneratorRuntime.mark((function a(){var o,r,l,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=new window.google.maps.Map(m.current,{zoom:15,center:v,clickableIcons:!1,fullscreenControl:!1,mapTypeControl:!0,gestureHandling:"greedy",mapTypeControlOptions:{position:window.google.maps.ControlPosition.BOTTOM_CENTER}}),n=new window.google.maps.Marker({map:t,draggable:!0,visible:!1}),e=new window.google.maps.InfoWindow,o=document.getElementById("map-search-name"),(c=new window.google.maps.places.Autocomplete(o,{fields:["geometry","name"],types:["geocode"],componentRestrictions:{country:["id"]}})).bindTo("bounds",t),i=new window.google.maps.Polygon({map:t,paths:[],strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.1,clickable:!1}),s=new window.google.maps.DirectionsService,p=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,preserveViewport:!0}),r=document.getElementsByClassName("map-search-bar")[0],l=document.getElementsByClassName("map-find-me")[0],u=document.getElementsByClassName("map-radius-slider")[0],t.controls[window.google.maps.ControlPosition.TOP_LEFT].push(r),t.controls[window.google.maps.ControlPosition.RIGHT_BOTTOM].push(l),t.controls[window.google.maps.ControlPosition.TOP_LEFT].push(u),D();case 16:case"end":return a.stop()}}),a)}))))}),[]);var j=function a(o,c){I.map((function(t){return t.setMap(null)})),p&&p.setMap(null),g({url:"https://siis-api.udata.id/point_kelurahan/".concat(c,",").concat(o)}).then((function(n){var e=n.data.data[0].shape.slice(11,-2).split(", ").map((function(t){var n=t.split(" ");return{lat:parseFloat(n[1]),lng:parseFloat(n[0])}}));i.setPath(e),i.setMap(t);var a=document.getElementById("map-popup");if(a){var r=n.data.data[0],s=r.provinsi,l=r.kabupaten,p=r.kecamatan,u=r.kelurahan,d="\n\t\t\t\t<div>\n\t\t\t\t\t<span>".concat(s,"</span>\n\t\t\t\t\t<span>").concat(l,"</span>\n\t\t\t\t\t<span>").concat(p,"</span>\n\t\t\t\t\t<span>").concat(u,'</span><br/>\n\t\t\t\t\t<span id="map-popup-odp-loading">Fetching ODP data...</span>\n\t\t\t\t</div>');a.innerHTML="",a.insertAdjacentHTML("beforeend",d)}_(o,c)})).catch((function(t){if(!r.a.isCancel(t)){console.log(t);var o=document.getElementById("map-popup");o.innerHTML="",o.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>Fetching failed !</div>\n\t\t\t\t\t\t<span id="map-popup-edit">Try again...</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t'),document.getElementById("map-popup-edit").addEventListener("click",(function(){e.setContent('<div id="map-popup">Fetching again...</div>');var t=n.getPosition();a(t.lat(),t.lng())}))}}))},_=function(n,a){console.log(w.current.value),f({url:"http://digitasi-consumer-siis-dev.vsan-apps.playcourt.id/api/siis/v1/get-odp",method:"post",data:{lat:n,long:a,radius:w.current.value},auth:{username:"telkom",password:"da1c25d8-37c8-41b1-afe2-42dd4825bfea"}}).then((function(o){var i=o.data.data.features.filter((function(t){return t.attributes.portidlenumber>0})),r=0;if(i.length){var c=i.map((function(t){return t.attributes.deviceportnumber})).reduce((function(t,n){return t+n})),l=i.map((function(t){return t.attributes.portidlenumber})).reduce((function(t,n){return t+n}));r=parseFloat((l/c*100).toFixed(1))}document.getElementById("map-popup-odp-loading").innerHTML="".concat(i.length," ODP found (").concat(r,"%)"),I=[],t.setCenter({lat:n,lng:a}),i.length&&t.setZoom(17),i.forEach((function(o,i){var r,c=o.attributes;switch(c.status_occ_add){case"RED":r="red";break;case"YELLOW":r="yellow";break;case"GREEN":r="green";break;default:r="black"}I.push(new window.google.maps.Marker({map:t,position:{lat:c.lat,lng:c.long},icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:6,fillColor:r,fillOpacity:.9,strokeWeight:0}})),I[i].infoWindow=new window.google.maps.InfoWindow({content:"<div>\n\t\t\t\t\t\t<span>Latitude: ".concat(c.lat,"</span><br/>\n\t\t\t\t\t\t<span>Longitude: ").concat(c.long,"</span><br/>\n\t\t\t\t\t\t<span>Device ID: ").concat(c.device_id,"</span><br/>\n\t\t\t\t\t\t<span>Device name: ").concat(c.devicename,"</span><br/>\n\t\t\t\t\t\t<span>Status: ").concat(c.status_occ_add,"</span><br/>\n\t\t\t\t\t\t<span>Port number: ").concat(c.deviceportnumber,"</span><br/>\n\t\t\t\t\t\t<span>Idle port: ").concat(c.portidlenumber,"</span>\n\t\t\t\t\t</div>")}),I[i].addListener("mouseover",(function(){e.close(),I.map((function(t){return t.infoWindow.close()})),I[i].infoWindow.open(t,I[i])})),I[i].addListener("mouseout",(function(){I[i].infoWindow.close()})),I[i].addListener("click",(function(){e.close(),I.map((function(t){return t.infoWindow.close()})),I[i].infoWindow.open(t,I[i]),s.route({origin:"".concat(n,",").concat(a),destination:"".concat(c.lat,",").concat(c.long),travelMode:"WALKING"},(function(n,e){"OK"===e?(p.setMap(t),p.setDirections(n)):window.alert("Directions request failed due to "+e)}))}))}))})).catch((function(t){r.a.isCancel(t)||(console.log(t),document.getElementById("map-popup-odp-loading").innerHTML="Fetching ODP failed!")}))},D=function(){window.google.maps.event.addListener(c,"place_changed",(function(){var a=c.getPlace();if(a.geometry){var o=a.geometry,r=o.location;o.viewport?t.fitBounds(a.geometry.viewport):(t.setCenter(a.geometry.location),t.setZoom(16)),n.setPosition(r),n.setVisible(!0),e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),i.setMap(null),j(r.lat(),r.lng())}else alert("Quota exceeded!")})),n.addListener("click",(function(){e.getMap()||e.open(t,n)})),n.addListener("mouseover",(function(){I.map((function(t){return t.infoWindow.close()})),e.open(t,n)})),n.addListener("dragstart",(function(){e.close()})),n.addListener("dragend",(function(){var a=n.getPosition();e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),i.setMap(null),j(a.lat(),a.lng())})),t.addListener("click",(function(a){h.current&&(h.current.value=""),n.setPosition(a.latLng),n.setVisible(!0),e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),i.setMap(null),j(a.latLng.lat(),a.latLng.lng())})),b.current.addEventListener("submit",(function(a){a.preventDefault();var o=b.current.querySelectorAll("input"),i={lat:parseFloat(o[0].value)||0,lng:parseFloat(o[1].value)||0};n.setPosition(i),n.setVisible(!0),t.panTo(i),e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),j(i.lat,i.lng)}))};return o.a.createElement("div",{className:"map-page"},o.a.createElement("div",{className:"map-container",ref:m}),o.a.createElement("div",{className:"map-search-bar"},o.a.createElement("div",{className:"map-search-option"},o.a.createElement("div",{onClick:function(){return S(!0)},className:F?"active":""},"Search by name"),o.a.createElement("div",{onClick:function(){return S(!1)},className:F?"":"active"},"Search by latlong")),o.a.createElement("input",{id:"map-search-name",ref:h,placeholder:"Search here...",style:{display:F?"inline-block":"none"}}),o.a.createElement("form",{ref:b,style:{display:F?"none":"block"}},o.a.createElement("input",{placeholder:"Latitude",value:k,onChange:function(t){return n=t.target.value,void(/^[0-9.-]*$/.test(n)&&E(n));var n}}),o.a.createElement("br",null),o.a.createElement("input",{placeholder:"Longitude",value:C,onChange:function(t){return n=t.target.value,void(/^[0-9.-]*$/.test(n)&&L(n));var n}}),o.a.createElement("button",{type:"submit"},"Search"))),o.a.createElement("div",{className:"map-find-me",onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(a){var o=a.coords;h.current&&(h.current.value="");var r={lat:o.latitude,lng:o.longitude};n.setPosition(r),n.setVisible(!0),e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),i.setMap(null),t.setCenter(r),t.setZoom(17),j(o.latitude,o.longitude)}),(function(){alert("The Geolocation service failed.")})):alert("Your browser doesn't support geolocation.")}},o.a.createElement("img",{src:l.a,alt:"find_me"})),o.a.createElement("div",{className:"map-radius-slider"},o.a.createElement("input",{type:"range",ref:w,min:"100",max:"300",step:"25",value:M,onChange:function(t){P(t.target.value)}}),o.a.createElement("br",null),o.a.createElement("span",null,"Radius: ",M)))}}}]);
//# sourceMappingURL=2.bundle.js.map