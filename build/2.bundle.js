(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{15:function(t,n,e){"use strict";n.a=e.p+"src/images/pin_red.png"},16:function(t,n,e){"use strict";n.a=e.p+"src/images/pin_yellow.png"},17:function(t,n,e){"use strict";n.a=e.p+"src/images/pin_green.png"},18:function(t,n,e){"use strict";n.a=e.p+"src/images/pin_black.png"},19:function(t,n,e){"use strict";n.a=e.p+"src/images/my_location.png"},47:function(t,n,e){var a=e(4),o=e(48);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1};a(o,i);t.exports=o.locals||{}},48:function(t,n,e){(n=e(5)(!1)).push([t.i,".map-page {\n\twidth: 100vw;\n\theight: 100vh;\n}\n.map-container {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.map-search-bar {\n\tposition: fixed;\n\tmargin-top: 10px;\n\tmargin-left: 10px;\n\tmax-width: 200px;\n\twidth: 70%;\n\theight: max-content;\n\tbackground: white;\n\tborder-radius: 3px;\n}\n.map-search-option {\n\tbox-sizing: border-box;\n\tcursor: pointer;\n\tbackground-color: whitesmoke;\n\tcolor: gray;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr 1fr;\n}\n.map-search-option div {\n\theight: 30px;\n\tline-height: 30px;\n\ttext-align: center;\n}\n.map-search-option div.active {\n\tbackground-color: white;\n\tcolor: black;\n}\n\n#map-search-name {\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n\n#map-popup {\n\twidth: max-content;\n\theight: max-content;\n}\n#map-popup span {\n\ttext-align: center;\n\tdisplay: block;\n}\n#map-popup-edit {\n\tmargin-top: 5px;\n\tcolor: blue;\n\tcursor: pointer;\n}\n\n#map-form {\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n}\n#map-form label {\n\tdisplay: block;\n\tmargin: 5px;\n}\n#map-form button {\n\tmargin-top: 15px;\n}\n\n.map-input-bg {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 0;\n\theight: 0;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n}\n.map-input-bg.show {\n\twidth: 100%;\n\theight: 100%;\n}\n.map-find-me {\n\tposition: fixed;\n\tbackground-color: white;\n\tmargin-right: 12px;\n}\n.map-radius-slider {\n\tbackground-color: white;\n\tposition: fixed;\n\tmargin-top: 10px;\n\tmargin-left: 10px;\n}\n#map-input-form {\n\tposition: fixed;\n\tdisplay: none;\n\tgrid-template-columns: 1fr;\n\tbackground-color: white;\n\tborder-radius: 5px;\n\tpadding: 15px;\n\ttop: 60%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\topacity: 0;\n\ttransition: 0.3s;\n}\n#map-input-form.show {\n\ttop: 50%;\n\topacity: 1;\n}\n#map-input-form input {\n\ttext-transform: uppercase;\n}\n#map-input-form label {\n\tdisplay: block;\n\tmargin: 7px;\n}\n#map-input-form button {\n\tmargin-top: 15px;\n}\n",""]),t.exports=n},51:function(t,n,e){"use strict";e.r(n);var a=e(0),o=e.n(a),i=e(20),r=e.n(i),s=e(29),c=e.n(s),p=(e(47),e(15)),l=e(16),d=e(17),u=e(18),m=e(19);function g(t,n,e,a,o,i,r){try{var s=t[i](r),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(a,o)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var i=t.apply(n,e);function r(t){g(i,a,o,r,s,"next",t)}function s(t){g(i,a,o,r,s,"throw",t)}r(void 0)}))}}function v(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],a=!0,o=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(e.push(r.value),!n||e.length!==n);a=!0);}catch(t){o=!0,i=t}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return h(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return h(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}var b=c()(r.a),w=c()(r.a),y={lat:-6.2088,lng:106.8456};n.default=function(){var t,n,e,i,s,c,g,h=Object(a.useRef)(null),k=Object(a.useRef)(null),E=Object(a.useRef)(null),x=Object(a.useRef)(null),C=v(Object(a.useState)(""),2),L=C[0],O=C[1],M=v(Object(a.useState)(""),2),P=M[0],T=M[1],F=v(Object(a.useState)("200"),2),S=F[0],_=F[1],I=v(Object(a.useState)(!0),2),j=I[0],D=I[1],N=[];Object(a.useEffect)((function(){var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyCXU3EeZo0yexMDnmkigGJJvTvcVDpgPl0","&libraries=places,geometry"),window.document.body.appendChild(a),a.addEventListener("load",f(regeneratorRuntime.mark((function a(){var o,r,p,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=new window.google.maps.Map(h.current,{zoom:15,center:y,clickableIcons:!1,fullscreenControl:!1,mapTypeControl:!0,gestureHandling:"greedy",mapTypeControlOptions:{position:window.google.maps.ControlPosition.BOTTOM_CENTER}}),n=new window.google.maps.Marker({map:t,draggable:!0,visible:!1}),e=new window.google.maps.InfoWindow,o=document.getElementById("map-search-name"),(s=new window.google.maps.places.Autocomplete(o,{fields:["geometry","name"],types:["geocode"],componentRestrictions:{country:["id"]}})).bindTo("bounds",t),i=new window.google.maps.Polygon({map:t,paths:[],strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.1,clickable:!1}),c=new window.google.maps.DirectionsService,g=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,preserveViewport:!0}),r=document.getElementsByClassName("map-search-bar")[0],p=document.getElementsByClassName("map-find-me")[0],l=document.getElementsByClassName("map-radius-slider")[0],t.controls[window.google.maps.ControlPosition.TOP_LEFT].push(r),t.controls[window.google.maps.ControlPosition.RIGHT_BOTTOM].push(p),t.controls[window.google.maps.ControlPosition.TOP_LEFT].push(l),B();case 16:case"end":return a.stop()}}),a)}))))}),[]);var R=function a(o,s){N.map((function(t){return t.setMap(null)})),g&&g.setMap(null),b({url:"https://siis-api.udata.id/point_kelurahan/".concat(s,",").concat(o)}).then((function(n){var e=n.data.data[0].shape.slice(11,-2).split(", ").map((function(t){var n=t.split(" ");return{lat:parseFloat(n[1]),lng:parseFloat(n[0])}}));i.setPath(e),i.setMap(t);var a=document.getElementById("map-popup");if(a){var r=n.data.data[0],c=r.provinsi,p=r.kabupaten,l=r.kecamatan,d=r.kelurahan,u="\n\t\t\t\t<div>\n\t\t\t\t\t<span>".concat(c,"</span>\n\t\t\t\t\t<span>").concat(p,"</span>\n\t\t\t\t\t<span>").concat(l,"</span>\n\t\t\t\t\t<span>").concat(d,'</span><br/>\n\t\t\t\t\t<span id="map-popup-odp-loading">Fetching ODP data...</span>\n\t\t\t\t</div>');a.innerHTML="",a.insertAdjacentHTML("beforeend",u)}A(o,s)})).catch((function(t){if(!r.a.isCancel(t)){console.log(t);var o=document.getElementById("map-popup");o.innerHTML="",o.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>Fetching failed !</div>\n\t\t\t\t\t\t<span id="map-popup-edit">Try again...</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t'),document.getElementById("map-popup-edit").addEventListener("click",(function(){e.setContent('<div id="map-popup">Fetching again...</div>');var t=n.getPosition();a(t.lat(),t.lng())}))}}))},A=function(n,a){console.log(x.current.value),w({url:"http://digitasi-consumer-siis-dev.vsan-apps.playcourt.id/api/siis/v1/get-odp",method:"post",data:{lat:n,long:a,radius:x.current.value},auth:{username:"telkom",password:"da1c25d8-37c8-41b1-afe2-42dd4825bfea"}}).then((function(o){var i=o.data.data.features.filter((function(t){return t.attributes.portidlenumber>0}));document.getElementById("map-popup-odp-loading").innerHTML="Found ".concat(i.length," ODP available"),N=[],t.setCenter({lat:n,lng:a}),i.length&&t.setZoom(17),i.forEach((function(o,i){var r,s=o.attributes;switch(s.status_occ_add){case"RED":r=p.a;break;case"YELLOW":r=l.a;break;case"GREEN":r=d.a;break;default:r=u.a}N.push(new window.google.maps.Marker({map:t,position:{lat:s.lat,lng:s.long},icon:{url:r,size:new window.google.maps.Size(32,32),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(16,32)}})),N[i].infoWindow=new window.google.maps.InfoWindow({content:"<div>\n\t\t\t\t\t\t<span>Latitude: ".concat(s.lat,"</span><br/>\n\t\t\t\t\t\t<span>Longitude: ").concat(s.long,"</span><br/>\n\t\t\t\t\t\t<span>Device ID: ").concat(s.device_id,"</span><br/>\n\t\t\t\t\t\t<span>Device name: ").concat(s.devicename,"</span><br/>\n\t\t\t\t\t\t<span>Status: ").concat(s.status_occ_add,"</span><br/>\n\t\t\t\t\t\t<span>Port number: ").concat(s.deviceportnumber,"</span><br/>\n\t\t\t\t\t\t<span>Idle port: ").concat(s.portidlenumber,"</span>\n\t\t\t\t\t</div>")}),N[i].addListener("mouseover",(function(){e.close(),N.map((function(t){return t.infoWindow.close()})),N[i].infoWindow.open(t,N[i])})),N[i].addListener("mouseout",(function(){N[i].infoWindow.close()})),N[i].addListener("click",(function(){e.close(),N.map((function(t){return t.infoWindow.close()})),N[i].infoWindow.open(t,N[i]),c.route({origin:"".concat(n,",").concat(a),destination:"".concat(s.lat,",").concat(s.long),travelMode:"WALKING"},(function(n,e){"OK"===e?(g.setMap(t),g.setDirections(n)):window.alert("Directions request failed due to "+e)}))}))}))})).catch((function(t){r.a.isCancel(t)||(console.log(t),document.getElementById("map-popup-odp-loading").innerHTML="Fetching ODP failed!")}))},B=function(){window.google.maps.event.addListener(s,"place_changed",(function(){var a=s.getPlace();if(a.geometry){var o=a.geometry,r=o.location;o.viewport?t.fitBounds(a.geometry.viewport):(t.setCenter(a.geometry.location),t.setZoom(16)),n.setPosition(r),n.setVisible(!0),e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),i.setMap(null),R(r.lat(),r.lng())}else alert("Quota exceeded!")})),n.addListener("click",(function(){e.getMap()||e.open(t,n)})),n.addListener("mouseover",(function(){N.map((function(t){return t.infoWindow.close()})),e.open(t,n)})),n.addListener("dragstart",(function(){e.close()})),n.addListener("dragend",(function(){var a=n.getPosition();e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),i.setMap(null),R(a.lat(),a.lng())})),t.addListener("click",(function(a){k.current&&(k.current.value=""),n.setPosition(a.latLng),n.setVisible(!0),e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),i.setMap(null),R(a.latLng.lat(),a.latLng.lng())})),E.current.addEventListener("submit",(function(a){a.preventDefault();var o=E.current.querySelectorAll("input"),i={lat:parseFloat(o[0].value)||0,lng:parseFloat(o[1].value)||0};n.setPosition(i),n.setVisible(!0),t.panTo(i),e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),R(i.lat,i.lng)}))};return o.a.createElement("div",{className:"map-page"},o.a.createElement("div",{className:"map-container",ref:h}),o.a.createElement("div",{className:"map-search-bar"},o.a.createElement("div",{className:"map-search-option"},o.a.createElement("div",{onClick:function(){return D(!0)},className:j?"active":""},"Search by name"),o.a.createElement("div",{onClick:function(){return D(!1)},className:j?"":"active"},"Search by latlong")),o.a.createElement("input",{id:"map-search-name",ref:k,placeholder:"Search here...",style:{display:j?"inline-block":"none"}}),o.a.createElement("form",{ref:E,style:{display:j?"none":"block"}},o.a.createElement("input",{placeholder:"Latitude",value:L,onChange:function(t){return n=t.target.value,void(/^[0-9.-]*$/.test(n)&&O(n));var n}}),o.a.createElement("br",null),o.a.createElement("input",{placeholder:"Longitude",value:P,onChange:function(t){return n=t.target.value,void(/^[0-9.-]*$/.test(n)&&T(n));var n}}),o.a.createElement("button",{type:"submit"},"Search"))),o.a.createElement("div",{className:"map-find-me",onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(a){var o=a.coords;k.current&&(k.current.value="");var r={lat:o.latitude,lng:o.longitude};n.setPosition(r),n.setVisible(!0),e.setContent('<div id="map-popup">Fetching data...</div>'),e.open(t,n),i.setMap(null),t.setCenter(r),t.setZoom(17),R(o.latitude,o.longitude)}),(function(){alert("The Geolocation service failed.")})):alert("Your browser doesn't support geolocation.")}},o.a.createElement("img",{src:m.a,alt:"find_me"})),o.a.createElement("div",{className:"map-radius-slider"},o.a.createElement("input",{type:"range",ref:x,min:"100",max:"300",step:"25",value:S,onChange:function(t){_(t.target.value)}}),o.a.createElement("br",null),o.a.createElement("span",null,"Radius: ",S)))}}}]);
//# sourceMappingURL=2.bundle.js.map